<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Get <em>observation</em> table — observation • febr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<meta property="og:title" content="Get <em>observation</em> table — observation" />

<meta property="og:description" content="Download data from the observation ("observacao") table of one or more datasets contained in the Free
Brazilian Repository for Open Soil Data -- febr, http://www.ufsm.br/febr. This includes spatial
coordinates, observation date, and variables such as geology, land use and vegetation, local topography, and
much more. Use header if you want to check what are the variables contained in the
observation table of a dataset before downloading it." />
<meta name="twitter:card" content="summary" />
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">febr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/febr.html">Guia básico</a>
</li>
<li>
  <a href="../reference/index.html">Funções</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/febr-team/febr-package">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get <em>observation</em> table</h1>
    </div>

    
    <p>Download data from the <em>observation</em> ("observacao") table of one or more datasets contained in the Free
Brazilian Repository for Open Soil Data -- <em><strong>febr</strong></em>, <a href='http://www.ufsm.br/febr'>http://www.ufsm.br/febr</a>. This includes spatial
coordinates, observation date, and variables such as geology, land use and vegetation, local topography, and
much more. Use <code><a href='header.html'>header</a></code> if you want to check what are the variables contained in the
<em>observation</em> table of a dataset before downloading it.</p>
    

    <pre class="usage"><span class='fu'>observation</span>(<span class='no'>dataset</span>, <span class='no'>variable</span>, <span class='kw'>stack</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>missing</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>coord</span> <span class='kw'>=</span> <span class='st'>"keep"</span>,
  <span class='kw'>time</span> <span class='kw'>=</span> <span class='st'>"keep"</span>, <span class='kw'>data</span> <span class='kw'>=</span> <span class='st'>"keep"</span>), <span class='kw'>standardization</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>crs</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>time.format</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>units</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>round</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>),
  <span class='kw'>harmonization</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>harmonize</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>level</span> <span class='kw'>=</span> <span class='fl'>2</span>), <span class='kw'>progress</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dataset</th>
      <td><p>Character vector indicating one or more datasets. Identification codes should be as recorded
in <a href='http://www.ufsm.br/febr/catalog/'>http://www.ufsm.br/febr/catalog/</a>. Use <code>dataset = "all"</code> to download all datasets.</p></td>
    </tr>
    <tr>
      <th>variable</th>
      <td><p>(optional) Character vector indicating one or more variables. Accepts only general 
identification codes, e.g. `"ferro"` and `"carbono"`. If missing, then a set of standard identification 
variables is downloaded. Use <code>variable = "all"</code> to download all variables. See &#8216;Details&#8217; for 
more information.</p></td>
    </tr>
    <tr>
      <th>stack</th>
      <td><p>(optional) Logical value indicating if tables from different datasets should be stacked on a 
single table for output. Requires `standardization = list(units = TRUE)` -- see below. Defaults to 
<code>stack = FALSE</code>, the output being a list of tables.</p></td>
    </tr>
    <tr>
      <th>missing</th>
      <td><p>(optional) List with named sub-arguments indicating what should be done with an observation
missing spatial coordinates, <code>coord</code>, date of observation, <code>time</code>, or data on variables, <code>data</code>? Options are
<code>"keep"</code> (default) and <code>"drop"</code>.</p></td>
    </tr>
    <tr>
      <th>standardization</th>
      <td><p>(optional) List with named sub-arguments indicating how to perform data
standardization.</p><ul>
<li><p><code>crs</code> Character string indicating the EPSG code of the coordinate reference system (CRS) to which
spatial coordinates should be transformed. For example, <code>crs = "EPSG:4674"</code>, i.e. SIRGAS 2000, the
standard CRS for Brazil -- see more at <a href='http://spatialreference.org/ref/epsg/'>http://spatialreference.org/ref/epsg/</a>. Defaults to
<code>crs = NULL</code>, i.e. no transformation is performed.</p></li>
<li><p><code>time.format</code> Character string indicating how to format dates. For example,
<code>time.format = "%d-%m-%Y"</code>, i.e. dd-mm-yyyy such as in 31-12-2001. Defaults to
<code>time.format = NULL</code>, i.e. no formatting is performed. See <code><a href='http://www.rdocumentation.org/packages/base/topics/as.Date'>as.Date</a></code> for more
details.</p></li>
<li><p><code>units</code> Logical value indicating if the measurement units of the continuous variable(s) should
be converted to the standard measurement unit(s). Defaults to <code>units = FALSE</code>, i.e. no conversion is
performed. See <code><a href='standard.html'>standard</a></code> for more information.</p></li>
<li><p><code>round</code> Logical value indicating if the values of the continuous variable(s) should be rounded
to the standard number of decimal places. Requires <code>units = TRUE</code>. Defaults to <code>round = FALSE</code>, i.e.
no rounding is performed. See <code><a href='standard.html'>standard</a></code> for more information.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>harmonization</th>
      <td><p>(optional) List with named sub-arguments indicating if and how to perform data
harmonization.</p><ul>
<li><p><code>harmonize</code> Logical value indicating if data should be harmonized? Defaults to <code>harmonize = FALSE</code>,
i.e. no harmonization is performed.</p></li>
<li><p><code>level</code> Integer value indicating the number of levels of the identification code of the variable(s)
that should be considered for harmonization. Defaults to <code>level = 2</code>. See &#8216;Details&#8217; for more
information.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>progress</th>
      <td><p>(optional) Logical value indicating if a download progress bar should be displayed.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>(optional) Logical value indicating if informative messages should be displayed. Generally 
useful to identify datasets with inconsistent data. Please report to <a href='mailto:febr-forum@googlegroups.com'>febr-forum@googlegroups.com</a> 
if you find any issue.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list of data frames or a data frame with data on the chosen variable(s) of the chosen dataset(s).</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <h3>Standard identification variables</h3>
    Standard identification variables and their content are as follows:
<ul>
<li><p><code>dataset_id</code>. Identification code of the dataset in <em><strong>febr</strong></em> to which an observation belongs.</p></li>
<li><p><code>observacao_id</code>. Identification code of an observation in <em><strong>febr</strong></em>.</p></li>
<li><p><code>sisb_id</code>. Identification code of an observation in the Brazilian Soil Information System
maintained by the Brazilian Agricultural Research Corporation (EMBRAPA) at
<a href='https://www.bdsolos.cnptia.embrapa.br/consulta_publica.html'>https://www.bdsolos.cnptia.embrapa.br/consulta_publica.html</a>.</p></li>
<li><p><code>ibge_id</code>. Identification code of an observation in the database of the Brazilian Institute
of Geography and Statistics (IBGE) at <a href='http://www.downloads.ibge.gov.br/downloads_geociencias.htm#'>http://www.downloads.ibge.gov.br/downloads_geociencias.htm#</a>.</p></li>
<li><p><code>observacao_data</code>. Date (dd-mm-yyyy) in which an observation was made.</p></li>
<li><p><code>coord_sistema</code>. EPSG code of the coordinate reference system.</p></li>
<li><p><code>coord_x</code>. Longitude (°) or easting (m).</p></li>
<li><p><code>coord_y</code>. Latitude (°) or northing (m).</p></li>
<li><p><code>coord_precisao</code>. Precision with which x- and y-coordinates were determined (m).</p></li>
<li><p><code>coord_fonte</code>. Source of the x- and y-coordinates.</p></li>
<li><p><code>pais_id</code>. Country code (ISO 3166-1 alpha-2).</p></li>
<li><p><code>estado_id</code>. Code of the Brazilian federative unit where an observation was made.</p></li>
<li><p><code>municipio_id</code>. Name of the Brazilian county where as observation was made.</p></li>
<li><p><code>amostra_tipo</code>. Type of sample taken.</p></li>
<li><p><code>amostra_quanti</code>. Number of samples taken.</p></li>
<li><p><code>amostra_area</code>. Sampling area.</p></li>
</ul>
Further details about the content of the standard identification variables can be found in
<a href='http://www.ufsm.br/febr/book/'>http://www.ufsm.br/febr/book/</a> (in Portuguese).
    <h3>Harmonization</h3>
    Data harmonization consists of converting the values of a variable determined using some method <em>B</em> so
that they are (approximately) equivalent to the values that would have been obtained if the standard method
<em>A</em> had been used instead. For example, converting carbon content values obtained using a wet digestion
method to the standard dry combustion method is data harmonization.
    A heuristic data harmonization procedure is implemented in the <strong>febr</strong> package. It consists of grouping
variables
based on a chosen number of levels of their identification code. For example, consider a variable with an
identification code composed of four levels, <code>aaa_bbb_ccc_ddd</code>, where <code>aaa</code> is the first level and
<code>ddd</code> is the fourth level. Now consider a related variable, <code>aaa_bbb_eee_fff</code>. If the harmonization
is to consider all four coding levels (<code>level = 4</code>), then these two variables will remain coded as
separate variables. But if <code>level = 2</code>, then both variables will be re-coded as <code>aaa_bbb</code>, thus becoming the
same variable.
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='layer.html'>layer</a></code>, <code><a href='standard.html'>standard</a></code>, <code><a href='unit.html'>unit</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>res</span> <span class='kw'>&lt;-</span> <span class='fu'>observation</span>(<span class='kw'>dataset</span> <span class='kw'>=</span> <span class='st'>"ctb0013"</span>)</div><div class='output co'>#&gt; <span class='error'>Error in curl::curl_fetch_memory(url, handle = handle): gnutls_handshake() failed: An unexpected TLS packet was received.</span></div><div class='input'><span class='fu'>str</span>(<span class='no'>res</span>)</div><div class='output co'>#&gt; <span class='error'>Error in str(res): object 'res' not found</span></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Alessandro Samuel-Rosa <a href='mailto:alessandrosamuelrosa@gmail.com'>alessandrosamuelrosa@gmail.com</a>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Alessandro Samuel-Rosa, Universidade Federal de Santa Maria.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
